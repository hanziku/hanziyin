const strokeType={"Î±":7,"â„“":7,"â‘ ":7,"â‘¡":7,"â‘¢":7,"â‘£":7,"â‘¤":7,"â‘¥":7,"â‘¦":7,"â‘§":7,"â‘¨":7,"â‘©":7,"â‘ª":7,"â‘«":7,"â‘¬":7,"â‘­":7,"â‘®":7,"â‘¯":7,"â‘²":7,
"â–³":6,"âº„":5,"âº†":25,"âºŠ":31,"âºŒ":14,"ã„":65,"ã‚ˆ":51,"ã‚Š":33,"ã‚³":51,"ã‚µ":13,
"ã‚¹":54,"ãƒ¦":51,"ã‡€":1,"ã‡‡":5,"ã‡‰":6,"ã‡‹":5,"ã‡Œ":5,"ã‡":5,"ã‡Ž":5,"ã‡“":2,"ã‡ž":6,
"ã‡¢":5,"ã‡£":7,"ð›‚¦":7,"ä¸€":1,"ä¸ˆ":12,"ä¸":13,"ä¸":13,"ä¸‘":53,"ä¸“":11,"ä¸”":35,"ä¸–":13,
"ä¸˜":23,"ä¸œ":16,"ä¸£":12,"ä¸¨":3,"ä¸©":63,"ä¸¬":34,"ä¸±":62,"ä¸¶":4,"ä¸·":44,"ä¸¹":25,"ä¸º":42,
"ä¸¿":2,"ä¹€":5,"ä¹":5,"ä¹„":64,"ä¹…":25,"ä¹":21,"ä¹Ž":24,"ä¹":26,"ä¹‘":23,"ä¹—":21,"ä¹™":6,
"ä¹š":6,"ä¹›":5,"ä¹œ":56,"ä¹":25,"ä¹Ÿ":53,"ä¹¡":66,"ä¹¦":55,"äº…":3,"äºŠ":14,"äº‹":13,"äºŽ":11,
"äº•":11,"äºœ":13,"äºº":24,"äº»":23,"ä»¥":64,"å…‚":16,"å…†":24,"å…¥":24,"å…«":24,"å†‚":35,"å††":35,
"å†‰":35,"å†Œ":35,"å†–":45,"å†˜":45,"å†«":44,"å‡ ":25,"å‡µ":61,"å‡¸":53,"å‡¹":35,"åˆ‚":35,"å‹¹":25,
"åŒš":16,"åŒ¸":16,"å":13,"åŒ":12,"å":53,"å":61,"åœ":34,"å":31,"å©":53,"åŽ‚":12,"åŽ¶":64,
"åˆ":54,"åŠ":25,"å‘":62,"å£":35,"å²":35,"å›—":35,"å¤‚":25,"å¤Š":25,"å¤®":35,"å¤´":44,"å¥³":62,
"å­":55,"å­‘":55,"å­’":55,"å­“":55,"å®€":44,"å¯¸":15,"å°":52,"å°¢":12,"å°¸":51,"å°º":51,"å±±":36,
"å·":23,"å·ž":42,"å·¥":13,"å·¨":13,"å·±":51,"å·²":51,"å·³":51,"å·´":51,"å·¾":35,"å¹²":11,"å¹´":21,
"å¹¿":41,"å»´":55,"å»¿":13,"å¼“":51,"å½":51,"å½‘":65,"å½¡":22,"å½³":22,"å¿ƒ":46,"å¿„":43,"æˆ‰":16,
"æˆŠ":12,"æˆ‘":21,"æˆ¼":51,"æ‰‹":21,"æ‰Œ":15,"æ‰":15,"æ‰¿":55,"æ”µ":21,"æ–—":44,"æ—¡":16,
"æ—¥":35,"æ›°":35,"æ›±":35,"æ›²":35,"æ›³":35,"æœˆ":25,"æœ¨":13,"æœ©":13,"æœª":11,"æœ«":11,
"æœ¬":13,"æœ±":21,"æœ¿":13,"æŸ":13,"æ¥":14,"æ±":13,"æŸ¬":13,"æ¬ ":25,"æ­¢":31,"æ¯‹":65,
"æ¯Œ":65,"æ¯":65,"æ¯”":16,"æ°":26,"æ°‘":15,"æ°µ":44,"æ°¸":45,"ç¬":44,"ç‚º":42,"ç†":21,
"çˆª":22,"çˆ²":24,"çˆ¿":63,"ç‰‡":23,"ç‰™":16,"ç‰›":21,"ç‰œ":21,"çŠ¬":12,"çŠ­":25,"ç“œ":22,
"ç“¦":16,"ç”˜":13,"ç”Ÿ":21,"ç”°":15,"ç”±":15,"ç”²":15,"ç”³":15,"ç–‹":53,"ç–Œ":15,"ç–’":41,
"ç™½":23,"çš®":25,"çš¿":35,"ç›®":35,"ç¤º":11,"ç¤»":45,"ç¦¹":23,"ç¦º":35,"ç±³":44,"ç²›":51,
"çºŸ":66,"ç¼¶":21,"ç½’":35,"è€‚":13,"è€³":13,"è‚ƒ":51,"è‚…":51,"è‚‰":35,"è‡£":13,"è‡ª":23,
"è‡¼":23,"èˆŸ":22,"è‰®":51,"è™«":35,"è¡¤":45,"è¥¾":13,"è§":35,"è§’":25,"è¨€":41,"è¨":41,
"è® ":46,"è°·":24,"è±†":13,"è±¸":24,"è´":35,"èº«":23,"è»Š":13,"è½¦":16,"è¾¶":45,"é…‰":13,
"é‡":21,"é‡’":24,"é’…":21,"é•¿":61,"é—¨":43,"é˜":55,"éš¶":51,"éš¹":23,"éž":21,"é©":13,
"éŸ¦":11,"é ":12,"é¡µ":12,"é£›":64,"é£ž":64,"é¥£":25,"é»½":35,"é½¿":31,"é¾œ":25,"é¾°":31,
"é¾´":54,"é¾µ":21,"é¾¶":11,"ã":13,"ã„":16,"ã…":24,"ã†":22,"ã§":45,"ã”¾":56,"ã ¯":35,
"ã±":11,"ã¸¦":16,"ä":15,"ï¤‚":13,"ï¤‡":25,"ï¤ˆ":25,"ï¥ž":25,"ï¦":62,"ï¦Ž":21,"ï¨µ":23,
"ï©‚":51,"ï©›":13,"ï©":31,"ï©¦":45,"ïª´":13,"ï«Ž":25,"ð €€":13,"ð €ˆ":23,"ð €‰":23,"ð €Œ":56,
"ð €":13,"ð €‘":13,"ð €Ÿ":13,"ð ":65,"ð £":35,"ð ¦":35,"ð §":35,"ð ©":35,"ð °":11,"ð ±":13,
"ð ¾":35,"ð ‚€":13,"ð ‚‚":43,"ð ‚†":22,"ð ‚‡":12,"ð ‚‰":21,"ð ‚Š":25,"ð ‚":22,"ð ‚Ž":26,"ð ‚’":21,
"ð ‚£":22,"ð ‚¼":21,"ð ƒ‰":26,"ð ƒŠ":6,"ð ƒ‹":6,"ð ƒŒ":5,"ð ƒ":5,"ð ƒŽ":5,"ð ƒ‘":5,"ð ƒ“":52,"ð ƒ›":35,
"ð ƒœ":25,"ð ƒ¢":12,"ð „Œ":6,"ð „Ž":5,"ð „":7,"ð „“":26,"ð „”":7,"ð „™":13,"ð †¢":24,"ð ‘¹":21,"ð •„":15,
"ð ˜§":26,"ð ˜¨":26,"ð ™´":60,"ð š’":33,"ð ¤¬":63,"ð ¥“":15,"ð ¥»":16,"ð ¦":53,"ð ¦‘":12,"ð ¾ƒ":41,
"ð¡†µ":35,"ð¡—’":51,"ð¡¦¹":42,"ð¡­”":32,"ð¡¯":12,"ð¡°£":51,"ð¡°´":52,"ð¡³¿":36,"ð¡¸":21,"ð¡¿¨":6,
"ð¢€“":13,"ð¢º":22,"ð¢Ž—":55,"ð¢Žœ":55,"ð¢Ž§":55,"ð¢Ž±":55,"ð¢‘š":16,"ð£…²":21,"ð£Ž³":13,"ð£Žµ":53,
"ð£’š":13,"ð£¥‚":32,"ð£¦¶":16,"ð£«¬":65,"ð¤“°":22,"ð¤•ª":53,"ð¤£©":11,"ð¤¦¡":11,"ð¤°ƒ":21,"ð¤´”":53,
"ð¥†ž":35,"ð¥˜…":13,"ð¥Œ":21,"ð¥«—":21,"ð¦‰­":35,"ð¦£":16,"ð¦£ž":13,"ð¦¥’":63,"ð¦¥º":23,"ð¦«µ":51,
"ð§˜‡":26,"ð§°¨":22,"ð¨ˆ":23,"ð¨ˆ":23,"ð¨ˆ‘":23,"ð¨™¨":35,"ð¨³‡":13,"ð©‡¦":21,"ð©‡§":31,"ð©‡¨":24,
"ð©™±":64,"ð©™¿":24,"ð©°Š":11,"ð©°‹":31,"ðª“•":35,"ðª“":23,"ðªš¦":16,"ðªš´":35,"ðª›‰":25,"ðªœ€":13,
"ð«€":35,"ð« £":16,"ð¬‚›":13,"ð¬º·":12,"ð¬º»":12,"ð¬»‚":12,"ð¬»†":51,"ð¬»ž":35,"ð¬»Ÿ":13,"ð¬»¿":44,"ð¬¼":45,
"ð¬¼‚":7,"ð¬¼„":45,"ð¬¼˜":33,"ð¬¼™":16,"ð­€¡":21,"ð­³":25,"ð­•„":44,"ð­£”":15,"ð­¨˜":35,"ð­ºª":16,"ð®Œ":35,"ð® •":13,
"ð¯ ‚":6,"ð¯ ":53,"ð¯ «":31,"ð¯ ­":23,"ð¯ ¶":55,"ð¯¡":25,"ð¯¡µ":12,"ð¯¢ƒ":35,"ð¯§„":41,"ð¯§’":12,"ð¯§":25,
//ä»¥ä¸‹çš„éƒ¨ä»¶æ‹†å¤ªç´°ï¼Œè‡³åˆ° ç„¡ç­†åŠƒï¼Œè£œä¸Šä»¥å…å†æ‹†åˆ†
"å¹º":66, "ä¸":66,"å…¶":13,"é»‘":35,"ð¦¥‘":23,"åŠ‰":26,"å°":26,"åŒ—":31,"éª¨":35,
"é¦¬":13,"é•¸":13,"é•·":13,"é³¥":23,"çƒ":23,"é¸Ÿ":23,"ä¹Œ":23,"é©¬":55,"å©":35,"ç™¶":54,
"ç”š":13,"ç•™":26,"ä¸š":33,"åš":35,"å°ˆ":13,"å…¸":35,"ç•¢":35,"å¸¶":12,"é¼Ž":63,
"æ—¢":51,"å³":51,"æ®µ":23,"ä¸Ž":51,"æƒ ":13,"ã¥‘":12,"å­˜":12,"å¬":26,"åœ¨":12,
"ð¡¬ ":51,"æ¢Ÿ":23,"å³¶":23,"è£Š":23,"ð …":15,"å…œ":26,"ð«¨»":53,"ð¡¤":35,"æž­":23,
"ä‘“":13,"ð®©´":13,"ð®«™":13,"ð­¾":15,"æˆž":12,"è²¿":26,"è‡¦":13,"ð¯ ¯":51,"å¤€":13,"ð£‡“":63,
"ð®•¹":13,"é³¬":25,"æ–µ":26,"ð­œ³":13,"ð®©¸":13,"ð ƒ¤":23,"ð«¹†":65,"ð¡š‡":15,"ã¥‘":12,"å²›":25,
"ð®™Ÿ":15,"ð ‘¿":23,"ð£¦ž":12,"ð¦¥“":13,"ð¥š":26,"ð­„©":25,"ð¡¶“":35,"ð ­Š":23,"è¢…":25,"è´¸":26,
"ð¢œ§":35,"ð­¢":13,"ðªš¾":25,"ð®“¡":15,"ã¸ƒ":35,"ð ™š":15,"ð«Ž‡":33,"ä‰":33
//ä¿®æ­£ ,å„¿ä¸¨ æ‡‰æ˜¯23
,"ð«¶§":26, 
// chise prime
"ä¸":15,"ä¸‚":15,"ä¸ƒ":16,"ä¸„":31,"ä¸…":13,"ä¸‡":12,"ä¸‰":11,"ä¸Š":31,
"ä¸‹":13,"ä¸Œ":12,"ä¸":12,"ä¸—":13,"ä¸¡":13,"ä¸¤":13,"ä¸¥":13,"ä¸«":42,
"ä¸­":35,"ä¸¯":22,"ä¸°":21,"ä¸²":35,"ä¸³":35,"ä¸¸":62,"ä¹‚":24,"ä¹ƒ":52,
"ä¹†":62,"ä¹‰":24,"ä¹‹":41,"ä¹˜":21,"ä¹ ":54,"äº†":55,
"äºˆ":54,"äºŒ":11,"äº’":16,"äº”":13,"äºž":33,"äºŸ":15,"äº ":41,"äº¡":41,
"ä¾†":13,"å„¿":26,"å…€":12,"å…§":35,"å†„":35,"å†…":35,"å†Š":35,"å†Ž":35,
"åˆ€":52,"åˆ„":52,"åŠ›":52,"åŠž":52,"åŒ•":61,"åƒ":23,"å„":13,"å…":12,
"åŠ":42,"å":13,"å™©":13,"å››":35,"åœŸ":13,"åž‚":21,"åŸ€":21,"å£«":13,
"å¤•":25,"å¤§":12,"å¤¨":51,"å¤«":11,"å¤¬":15,"å¤·":15,"å¤¹":14,"å¤¾":12,
"å¥­":12,"å°¤":12,"å°¹":51,"å±®":63,"å±¯":16,"å·¿":41,"å¸‡":51,"å¹³":14,
"å»¾":12,"å¼‹":16,"å¼”":55,"å¼—":55,"å¿…":62,"æˆˆ":16,"æˆ‹":11,"æˆ¶":22,
"æˆ·":42,"æˆ¸":12,"æ”´":31,"æ–‡":41,"æ–¤":22,"æ–¥":22,"æ–¹":42,"æ— ":11,
"æ›´":12,"æžœ":35,"æ­¹":12,"æ­º":31,"æ¯›":21,"æ°´":55,"æ°¶":55,"æ°º":54,
"æ±‚":15,"ç«":42,"çˆ«":24,"çˆ¶":22,"çˆ»":22,"çŠ®":12,"çŽ„":41,"çŽ‡":41,
"çŽ‰":11,"çŽ‹":11,"ç”¨":25,"ç”«":13,"ç”´":35,"ç”µ":35,"ç”¶":23,"çŸ›":54,
"çŸ¢":21,"çŸ³":12,"ç¦¸":35,"ç¦¾":21,"ç§‰":25,"ç«‹":41,"ç«¹":21,"ç³¸":66,
"ç³¹":66,"ç½‘":35,"ç¾Š":42,"ç¾½":54,"è€":13,"è€Œ":12,"è€’":21,"è¿":51,
"è‚€":51,"è‡¿":21,"èˆŒ":21,"è‰²":25,"è‰¸":63,"è‰¹":13,"è™":31,"è¡£":41,
"è¥¿":12,"è¦€":13,"è¦‹":35,"è­±":42,"è²":35,"èµ¤":13,"è¾°":12,"è¾µ":22,
"é‚‘":35,"é‡†":24,"é‡‘":24,"é–€":35,"é˜œ":23,"éšº":45,"é›¨":13,"é‘":11,
"é’":11,"éŸ­":31,"éŸ³":41,"é¢¨":26,"é£Ž":26,"é¦–":42,"é«™":41,"é¬²":13,
"é¬¼":23,"é­š":25,"é±¼":25,"é¹¿":41,"é»ƒ":13,"é»„":13,"é»¹":33,"é¼ ":23,
"é½":41,"é¾":41,"é¾™":12,"é¾Ÿ":25,"é¾ ":24,"ð¯¥€":13,"ð¯¥¦":42,"ð¯¦„":25,
"ð¯¦":13,"ð¯¦‘":13,"ð¯¦“":13,"ð¯¦–":13,"ð¯¦˜":13,"ð¯¦Ÿ":13,"ð¯¦¡":13,"ð¯¦¢":13,
"ð¯¦£":13,"ð¯§™":13,"ð¯¨†":61,"ãƒ":64,"ãª":41,"ã’³":35,"ã”¿":16,"ã•š":52,
"ã˜´":35,"ãš’":12,"ã¡€":42,"ã¡­":66,"ã¦®":11,"ã¬°":35,"ä’‘":42,"ð €Š":12,
"ð Š":12,"ð ˜":12,"ð ¡":35,"ð ¢":36,"ð ´":35,"ð ‚ˆ":62,"ð ‚¤":23,"ð ‚¯":21,
"ð ‚¿":22,"ð ”—":24,"ð ”§":12,"ð •‹":35,"ð •’":35,"ð •²":35,"ð š¤":25,"ð ¡¦":21,
"ð ¦†":35,"ð ¦’":13,"ð ·½":35,"ð¡†ª":35,"ð¡•’":26,"ð¡—•":12,"ð¡—š":12,"ð¡—œ":12,
"ð¡—¾":13,"ð¡š":12,"ð¡¤¾":55,"ð¡¬":13,"ð¡°§":51,"ð¡³¾":63,"ð¡´€":63,"ð¡·©":21,
"ð¡¸“":63,"ð¡¾":63,"ð¡¿¦":66,"ð¢€š":13,"ð¢€³":51,"ð¢„‰":12,"ð¢†":21,"ð¢‡ˆ":66,
"ð¢‡":66,"ð¢Œ°":13,"ð¢ŽŸ":53,"ð¢Ž ":53,"ð¢Ž£":25,"ð¢Ž¨":55,"ð¢–©":26,"ð¢¦":12,
"ð¢¦":51,"ð¢¦‘":12,"ð¢ª":21,"ð£…¯":13,"ð£Žº":15,"ð£ƒ":15,"ð£²":15,"ð£º":15,
"ð£¬›":21,"ð¤“¯":12,"ð¤•£":35,"ð¤®º":31,"ð¤¯“":63,"ð¤°”":13,"ð¤°±":13,"ð¤°¶":35,
"ð¤±‘":13,"ð¤²¥":35,"ð¥ˆœ":13,"ð¥ˆ¸":13,"ð¥†":35,"ð¥Ÿ…":21,"ð¥¸¨":52,"ð¦ˆ¢":21,
"ð¦˜’":51,"ð¦£»":12,"ð¦¥”":23,"ð¦¥›":21,"ð¦¥«":21,"ð¦¥®":25,"ð§‘´":25,"ð§°§":12,
"ð¨³ˆ":31,"ð¨¸":23,"ð­º«":13,"ð®Ž³":13,

"âº¼":25,"â»–":35,
}
// import { readFileSync,writeFileSync } from "fs";
export const pack_stroke_type=(chars,firstFactors,secondFactors)=>{
    let out='',primes=[],unknownparts={};
    for (let i=0;i<chars.length;i++) {
        const ch=chars[i];
        if (!ch.trim())continue;
        let st='';
        if (typeof strokeType[ch]!=='undefined') { //is a prime
            st=((strokeType[ch]||0)+'0').slice(0,2)
        } else {
            if (!firstFactors) { 
                console.log('unknown prime',ch,ch.codePointAt(0).toString(16))
                primes.push(ch);
                continue;
            }
            let first=firstFactors[ch.codePointAt(0)];
            let second=secondFactors[ch.codePointAt(0)];
            if (first==ch) throw " recursive ids "+ch.codePointAt(0).toString(16);
        
            while (first!==' '&&first&&!strokeType[first]) {
                second=secondFactors[first.codePointAt(0)];
                first=firstFactors[first.codePointAt(0)];
                if (first==ch) throw "recursive ids "+ch;
            }
            if (!strokeType[first]) {
                //console.log("missing stroketype "+ch)
                // primes.push(ch)
            }

            const st1=strokeType[first]||'0';
            let st2='0';
            if (st1<10) { //ç¬¬ä¸€éƒ¨ä»½åªä¸€åˆ’ï¼Œå¦‚ç³» =ä¸¿ ç³¸
                while (second!==' '&&second&&!strokeType[second]) { //å–ç¬¬äºŒéƒ¨ä»¶çš„æœ«ç´š
                    second=firstFactors[second.codePointAt(0)]; //ç³¸=å¹ºå°
                }
                st2=strokeType[second];
            } 
            st=( ''+strokeType[first]+st2).slice(0,2);
        }
        //3 bits to encode 0~6
        out+=String.fromCharCode(0x3a+parseInt(st[0])*8 + parseInt(st[1]));        
    }
    // writeFileSync('primes.txt',primes.join('\n'))
    return out; //å¯å†å£“
}
export const unpack_stroke_type=st=>{
    const stroke1=[],stroke2=[];
    for (let i=0;i<st.length;i++) {
        const cod=st.codePointAt(i)-0x3a;
        // console.log(cod>>3,cod%8,cod,st[i])
        const st1=String.fromCharCode( 0x30+ (cod >> 3))  
        const st2=String.fromCharCode( 0x30+ (cod%8))
        stroke1.push(st1)
        stroke2.push(st2)
    }
    return [stroke1,stroke2];
}